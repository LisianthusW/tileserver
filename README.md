# 本地瓦片服务器 (Local Tile Server)

一个用于在本地提供地图瓦片服务的Node.js服务器，支持从tiles/18目录发包瓦片文件。

## 功能特性

- 🚀 基于Express.js的高性能HTTP服务器
- 🗺️ 支持标准瓦片URL格式：`/{z}/{x}/{y}.{format}`
- 🔄 支持多种瓦片格式：PNG, JPG, JPEG, WebP
- 🌐 内置CORS支持，便于前端集成
- 💾 自动缓存头设置，提高访问性能
- 📊 提供服务状态和瓦片信息API
- ❤️ 健康检查端点支持

## 安装与运行

### 1. 安装依赖
```bash
npm install
```

### 2. 准备瓦片数据
确保`tiles/18`目录下有瓦片文件，文件结构应为：
```
tiles/
└── 18/
    └── x/
        └── y.png (或其他格式)
```

### 3. 启动服务器
```bash
# 开发模式（自动重启）
npm run dev

# 生产模式
npm start
```

服务器将在 http://localhost:3000 启动

## API端点

### 瓦片服务
- **URL**: `/{z}/{x}/{y}.{format}`
- **方法**: GET
- **示例**: `http://localhost:3000/18/131072/131072.png`

### 服务信息
- **URL**: `/`
- **方法**: GET
- **返回**: 服务器信息和使用说明

### 瓦片信息
- **URL**: `/tiles-info`
- **方法**: GET
- **返回**: 可用瓦片级别和目录结构信息

### 健康检查
- **URL**: `/health`
- **方法**: GET
- **返回**: 服务器状态信息

## 配置

可通过环境变量配置：
- `PORT`: 服务端口（默认：3000）

## 开发任务清单

- [✅] 1. 分析项目需求，确定技术栈（Node.js/Express） - 2025-01-20
- [✅] 2. 初始化项目，创建package.json - 2025-01-20
- [ ] 3. 检查tiles/18目录结构，确定瓦片文件格式
- [✅] 4. 创建瓦片服务器核心代码，实现文件读取和HTTP服务 - 2025-01-20
- [✅] 5. 实现瓦片文件路由处理（/{z}/{x}/{y}.png格式） - 2025-01-20
- [✅] 6. 添加跨域支持和错误处理 - 2025-01-20
- [✅] 7. 实现静态文件服务和缓存机制 - 2025-01-20
- [✅] 8. 项目上传到GitHub仓库 - 2025-06-12
- [ ] 9. 测试localhost服务，确保瓦片文件正常访问

## 许可证

MIT License